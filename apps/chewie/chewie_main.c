/****************************************************************************
 * Included Files
 ****************************************************************************/

#include <nuttx/config.h>
#include <stdio.h>
#include "drivers/pwm_out/drv_pwm_out.h"

/****************************************************************************
 * Pre-processor Definitions
 ****************************************************************************/

/****************************************************************************
 * Private Types
 ****************************************************************************/

/****************************************************************************
 * Private Data
 ****************************************************************************/

/****************************************************************************
 * Public Data
 ****************************************************************************/
/****************************************************************************
 * Private Functions
 ****************************************************************************/
/****************************************************************************
 * Public Functions
 ****************************************************************************/
/****************************************************************************
 * chewie_main
 ****************************************************************************/

#if defined(BUILD_MODULE)
int main(int argc, FAR char *argv[])
#else
int chewie_main(int argc, char *argv[])
#endif
{
  int i;
  printf("Chewie is running\n");
  init_pwm_device();
  for (i = 0; i < CHEWIE_NUM_OF_PWM_DEV; ++i) {
    printf("1set duty dev%d\n", i);
    set_pwm_duty(i + 1, CONFIG_CHEWIE_PWM_DUTY_MAX);
    sleep(10);
  }
  for (i = 0; i < CHEWIE_NUM_OF_PWM_DEV; ++i) {
    printf("2set duty dev%d\n", i);
    set_pwm_duty(i + 1, CONFIG_CHEWIE_PWM_DUTY_MAX);
    sleep(10);
  }
  uninit_pwm_device();
  return 0;
}
